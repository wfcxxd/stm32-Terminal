#include "font16.h"
#include <stddef.h>
#include <stdint.h>

/* 说明：
 * - 每个汉字为 16x16 单色点阵，共 16 行；每行 16 位 → 2 字节；总 32 字节。
 * - 位序：高位在左（0x80 -> 最左像素）。1=点亮，0=熄灭。
 * - 表中仅示例收录少数字（“你 好 中 文 温 湿 蓝 牙”），其余未收录的字会由 main.c 显示为“□”。
 * - 你可用点阵工具或脚本导出 16x16 位图，把 32 字节贴到下方表里即可。
 */

/* ✅ 关键修复：把 bmp 改为指针类型，便于用外部数组名初始化 */
typedef struct { uint32_t ucs; const uint8_t *bmp; } G16;

/* ===== 示例字形（简化笔画，仅供演示） ===== */

/* “你” U+4F60（示意） */
static const uint8_t G_4F60[32] = {
  0x00,0x10, 0x00,0x10, 0x7F,0xFE, 0x00,0x10,
  0x00,0x10, 0x1F,0xF0, 0x00,0x20, 0x00,0x40,
  0x7F,0xFE, 0x00,0x80, 0x01,0x00, 0x06,0x00,
  0x18,0x00, 0x60,0x00, 0x01,0x80, 0x00,0x60
};
/* “好” U+597D */
static const uint8_t G_597D[32] = {
  0x00,0x08, 0x3F,0xFC, 0x20,0x08, 0x20,0x08,
  0x3F,0xF8, 0x20,0x08, 0x20,0x08, 0x3F,0xF8,
  0x04,0x00, 0x04,0x00, 0x24,0x00, 0x24,0x00,
  0x44,0x00, 0x84,0x00, 0x04,0x00, 0x04,0x00
};
/* “中” U+4E2D */
static const uint8_t G_4E2D[32] = {
  0x00,0x00, 0x01,0x00, 0x01,0x00, 0x7F,0xFE,
  0x41,0x02, 0x41,0x02, 0x41,0x02, 0x7F,0xFE,
  0x41,0x02, 0x41,0x02, 0x41,0x02, 0x7F,0xFE,
  0x01,0x00, 0x01,0x00, 0x00,0x00, 0x00,0x00
};
/* “文” U+6587 */
static const uint8_t G_6587[32] = {
  0x00,0x00, 0x00,0x80, 0x40,0x80, 0x20,0x80,
  0x10,0x80, 0x0F,0xFE, 0x00,0x80, 0x01,0x80,
  0x02,0x80, 0x0C,0x80, 0x30,0x80, 0xC0,0x80,
  0x00,0x80, 0x00,0x80, 0x00,0x80, 0x00,0x00
};
/* “温” U+6E29（示意） */
static const uint8_t G_6E29[32] = {
  0x00,0x00, 0x00,0x20, 0x7F,0xFE, 0x02,0x20,
  0x12,0x20, 0x0A,0x20, 0x7F,0xFE, 0x02,0x20,
  0x12,0x20, 0x0A,0x20, 0x7F,0xFE, 0x00,0x00,
  0x1F,0xF8, 0x10,0x08, 0x1F,0xF8, 0x10,0x08
};
/* “湿” U+6E7F（示意） */
static const uint8_t G_6E7F[32] = {
  0x00,0x20, 0x7F,0xFE, 0x02,0x20, 0x02,0x20,
  0x3F,0xF0, 0x22,0x10, 0x3F,0xF0, 0x22,0x10,
  0x3F,0xF0, 0x00,0x00, 0x1F,0xF8, 0x10,0x08,
  0x1F,0xF8, 0x10,0x08, 0x1F,0xF8, 0x10,0x08
};
/* “蓝” U+84DD（示意） */
static const uint8_t G_84DD[32] = {
  0x00,0x40, 0x7F,0xFE, 0x04,0x40, 0x04,0x40,
  0x3F,0xF8, 0x24,0x48, 0x3F,0xF8, 0x24,0x48,
  0x3F,0xF8, 0x00,0x00, 0x7F,0xFE, 0x01,0x00,
  0x11,0x10, 0x0E,0xE0, 0x00,0x00, 0x00,0x00
};
/* “牙” U+7259（示意） */
static const uint8_t G_7259[32] = {
  0x00,0x00, 0x7F,0xFE, 0x01,0x00, 0x01,0x00,
  0x3F,0xFC, 0x21,0x04, 0x21,0x04, 0x3F,0xFC,
  0x01,0x00, 0x01,0x00, 0x7F,0xFE, 0x00,0x00,
  0x00,0x00, 0x00,0x00, 0x00,0x00, 0x00,0x00
};

/* 可继续在此追加更多字：
 * 例如：
 * static const uint8_t G_53D1[32] = { /* “发” * / ... };
 * static const uint8_t G_9001[32] = { /* “送” * / ... };
 */

static const G16 g_table[] = {
  {0x4F60, G_4F60}, /* 你 */
  {0x597D, G_597D}, /* 好 */
  {0x4E2D, G_4E2D}, /* 中 */
  {0x6587, G_6587}, /* 文 */
  {0x6E29, G_6E29}, /* 温 */
  {0x6E7F, G_6E7F}, /* 湿 */
  {0x84DD, G_84DD}, /* 蓝 */
  {0x7259, G_7259}, /* 牙 */
  /* 在此继续追加 … */
};

const uint8_t* Font16_FindGlyph(uint32_t ucs)
{
  /* 简单线性查找（表不大时足够；后续可换成二分或哈希） */
  for (unsigned i = 0; i < sizeof(g_table)/sizeof(g_table[0]); ++i){
    if (g_table[i].ucs == ucs) return g_table[i].bmp;
  }
  return NULL; /* 交给上层用“□”占位 */
}
